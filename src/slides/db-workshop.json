{
  "title": "Database Mental Model cho Frontend Developers",
  "author": "Workshop Host",
  "slides": [
    {
      "id": 0,
      "type": "title",
      "title": "Database Mental Model",
      "subtitle": "d√†nh cho Frontend Developers",
      "description": "Hi·ªÉu DB ƒë·ªÉ design API t·ªët h∆°n ‚Ä¢ C√≥ quiz v√† leaderboard ‚Ä¢ M·ª•c ti√™u: hi·ªÉu t∆∞ duy, kh√¥ng ph·∫£i SQL",
      "emoji": "üóÑÔ∏è"
    },
    {
      "id": 1,
      "type": "content",
      "title": "V√¨ sao FE c·∫ßn hi·ªÉu Database?",
      "emoji": "üß†",
      "points": [
        "70% API ch·∫≠m l√† do Database query kh√¥ng t·ªëi ∆∞u",
        "SSR/BFF ph·∫£i hi·ªÉu query ƒë·ªÉ t·ªëi ∆∞u performance",
        "Thi·∫øt k·∫ø API shape d·ª±a tr√™n c·∫•u tr√∫c DB",
        "Hi·ªÉu DB = √≠t blame Backend h∆°n üòÑ",
        "Fullstack trend: FE c·∫ßn bi·∫øt c·∫£ stack"
      ],
      "note": "B·∫°n kh√¥ng c·∫ßn vi·∫øt SQL, nh∆∞ng hi·ªÉu data flow gi√∫p build app t·ªët h∆°n"
    },
    {
      "id": 2,
      "type": "quiz",
      "quizId": "q1",
      "title": "üéØ Warm-up Quiz",
      "question": "Tr∆∞·ªùng h·ª£p n√†o g√¢y ra nhi·ªÅu database queries nh·∫•t?",
      "options": [
        "Fetch 100 users trong 1 query",
        "Fetch 1 user k√®m 5 posts c·ªßa h·ªç",
        "Fetch 100 users, r·ªìi fetch posts c·ªßa t·ª´ng user ri√™ng",
        "Fetch t·∫•t c·∫£ posts s·∫Øp x·∫øp theo ng√†y"
      ],
      "correctOption": 2,
      "timeLimit": 20,
      "explanation": "Option C t·∫°o ra 101 queries (1 cho users + 100 cho posts t·ª´ng user) - ƒë√¢y l√† N+1 problem!"
    },
    {
      "id": 3,
      "type": "content",
      "title": "Normalization l√† g√¨?",
      "emoji": "üìä",
      "points": [
        {
          "term": "M·ª•c ƒë√≠ch",
          "description": "Gi·∫£m tr√πng l·∫∑p d·ªØ li·ªáu, tr√°nh inconsistency"
        },
        {
          "term": "1NF",
          "description": "M·ªói cell ch·ª©a 1 gi√° tr·ªã duy nh·∫•t"
        },
        {
          "term": "2NF",
          "description": "T√°ch d·ªØ li·ªáu kh√¥ng ph·ª• thu·ªôc v√†o primary key"
        },
        {
          "term": "3NF",
          "description": "Lo·∫°i b·ªè transitive dependency"
        }
      ],
      "note": "C·∫≠p nh·∫≠t 1 n∆°i ‚Üí ƒë·ªìng b·ªô m·ªçi n∆°i. Kh√¥ng l∆∞u c√πng data ·ªü nhi·ªÅu ch·ªó"
    },
    {
      "id": 4,
      "type": "visual",
      "title": "Normalized vs Denormalized",
      "emoji": "‚öñÔ∏è",
      "visualType": "comparison",
      "left": {
        "title": "Normalized ‚úÖ",
        "code": "orders(id, user_id, status)\norder_items(order_id, product_id, qty)\nproducts(id, name, price)",
        "description": "3 b·∫£ng li√™n k·∫øt, kh√¥ng tr√πng data"
      },
      "right": {
        "title": "Denormalized ‚ùå",
        "code": "orders(\n  id,\n  user_name,\n  items: [{name, price}],\n  total_price\n)",
        "description": "L∆∞u JSON, user_name tr√πng l·∫∑p"
      }
    },
    {
      "id": 5,
      "type": "content",
      "title": "Khi n√†o Denormalize?",
      "emoji": "üöÄ",
      "points": [
        "Khi READ >> WRITE (ƒë·ªçc nhi·ªÅu h∆°n ghi)",
        "Precompute t·ªïng ti·ªÅn, s·ªë l∆∞·ª£ng comment",
        "Caching layer (Redis, CDN)",
        "Analytics/Reporting tables",
        "Trade-off: T·ªëc ƒë·ªô ƒë·ªçc vs Consistency"
      ],
      "highlight": "Denormalize c√≥ ch·ªß ƒë√≠ch, kh√¥ng ph·∫£i v√¨ l∆∞·ªùi join!"
    },
    {
      "id": 6,
      "type": "quiz",
      "quizId": "q2",
      "title": "üéØ Quiz: Normalization",
      "question": "Khi n√†o n√™n denormalize d·ªØ li·ªáu?",
      "options": [
        "Khi data thay ƒë·ªïi th∆∞·ªùng xuy√™n",
        "Khi c·∫ßn real-time consistency",
        "Khi t·ªëc ƒë·ªô ƒë·ªçc quan tr·ªçng v√† data √≠t thay ƒë·ªïi",
        "Khi mu·ªën ti·∫øt ki·ªám storage"
      ],
      "correctOption": 2,
      "timeLimit": 15,
      "explanation": "Denormalize ƒë√°nh ƒë·ªïi storage v√† consistency l·∫•y t·ªëc ƒë·ªô ƒë·ªçc - ph√π h·ª£p cho read-heavy, rarely-changing data"
    },
    {
      "id": 7,
      "type": "content",
      "title": "Unique Constraint",
      "emoji": "üîë",
      "points": [
        {
          "term": "UNIQUE",
          "description": "Kh√¥ng cho ph√©p gi√° tr·ªã tr√πng (email, username)"
        },
        {
          "term": "T·∫°i sao quan tr·ªçng?",
          "description": "Tr√°nh duplicate accounts, duplicate orders"
        },
        {
          "term": "FE c·∫ßn bi·∫øt",
          "description": "Validate tr∆∞·ªõc khi submit, handle error t·ª´ API"
        }
      ],
      "code": "-- Email ph·∫£i unique\nCREATE UNIQUE INDEX idx_email ON users(email);\n\n-- Error: duplicate key value violates unique constraint",
      "note": "FE validate ph·∫£i match v·ªõi DB constraints!"
    },
    {
      "id": 8,
      "type": "content",
      "title": "Foreign Key & Cascade",
      "emoji": "üîó",
      "points": [
        {
          "term": "FOREIGN KEY",
          "description": "R√†ng bu·ªôc quan h·ªá gi·ªØa c√°c b·∫£ng"
        },
        {
          "term": "ON DELETE CASCADE",
          "description": "X√≥a user ‚Üí X√≥a t·∫•t c·∫£ posts c·ªßa user"
        },
        {
          "term": "ON DELETE RESTRICT",
          "description": "Kh√¥ng cho x√≥a n·∫øu c√≤n data li√™n quan"
        },
        {
          "term": "ON DELETE SET NULL",
          "description": "X√≥a user ‚Üí posts.user_id = NULL"
        }
      ],
      "highlight": "Hi·ªÉu cascade ƒë·ªÉ bi·∫øt side effects khi delete!"
    },
    {
      "id": 9,
      "type": "visual",
      "title": "CASCADE trong th·ª±c t·∫ø",
      "emoji": "üí•",
      "visualType": "flow",
      "steps": [
        {
          "action": "DELETE FROM users WHERE id = 1",
          "result": "User b·ªã x√≥a"
        },
        {
          "action": "CASCADE ‚Üí posts",
          "result": "T·∫•t c·∫£ posts c·ªßa user b·ªã x√≥a"
        },
        {
          "action": "CASCADE ‚Üí comments",
          "result": "T·∫•t c·∫£ comments tr√™n posts ƒë√≥ b·ªã x√≥a"
        },
        {
          "action": "CASCADE ‚Üí likes",
          "result": "T·∫•t c·∫£ likes c≈©ng m·∫•t theo"
        }
      ],
      "warning": "M·ªôt l·ªánh DELETE c√≥ th·ªÉ x√≥a h√†ng ng√†n records! Lu√¥n hi·ªÉu r√µ cascade rules."
    },
    {
      "id": 10,
      "type": "quiz",
      "quizId": "q3",
      "title": "üéØ Quiz: Foreign Key",
      "question": "Foreign Key d√πng ƒë·ªÉ l√†m g√¨?",
      "options": [
        "Li√™n k·∫øt d·ªØ li·ªáu gi·ªØa c√°c b·∫£ng",
        "TƒÉng t·ªëc query",
        "T·ª± ƒë·ªông t·∫°o index"
      ],
      "correctOption": 0,
      "timeLimit": 15,
      "explanation": "FK ƒë·∫£m b·∫£o data integrity - kh√¥ng th·ªÉ c√≥ post c·ªßa user kh√¥ng t·ªìn t·∫°i"
    },
    {
      "id": 11,
      "type": "content",
      "title": "Index l√† g√¨?",
      "emoji": "üìö",
      "points": [
        "Gi·ªëng nh∆∞ m·ª•c l·ª•c s√°ch - t√¨m nhanh kh√¥ng c·∫ßn ƒë·ªçc c·∫£ cu·ªën",
        "Kh√¥ng c√≥ index ‚Üí DB scan to√†n b·ªô b·∫£ng (Full Table Scan)",
        "C√≥ index ‚Üí Nh·∫£y th·∫≥ng ƒë·∫øn data c·∫ßn t√¨m",
        "Trade-off: ƒê·ªçc nhanh h∆°n, Ghi ch·∫≠m h∆°n"
      ],
      "code": "-- Kh√¥ng c√≥ index: scan 1,000,000 rows\nSELECT * FROM users WHERE email = 'test@mail.com'\n\n-- C√≥ index: ~20 comparisons (log2 c·ªßa 1M)\nCREATE INDEX idx_email ON users(email);"
    },
    {
      "id": 12,
      "type": "visual",
      "title": "Index Performance",
      "emoji": "‚ö°",
      "visualType": "comparison",
      "left": {
        "title": "Kh√¥ng c√≥ Index",
        "code": "WHERE user_id = 123\n\nScan: 1,000,000 rows\nTime: ~500ms",
        "description": "Full table scan"
      },
      "right": {
        "title": "C√≥ Index",
        "code": "WHERE user_id = 123\n\nLookup: 20 steps\nTime: ~2ms",
        "description": "B-tree index lookup"
      }
    },
    {
      "id": 13,
      "type": "quiz",
      "quizId": "q4",
      "title": "üéØ Quiz: Index",
      "question": "Index gi√∫p g√¨ cho database?",
      "options": [
        "TƒÉng t·ªëc t√¨m ki·∫øm v√† query",
        "Gi·∫£m dung l∆∞·ª£ng database",
        "T·ª± ƒë·ªông s·ª≠a l·ªói data"
      ],
      "correctOption": 0,
      "timeLimit": 15,
      "explanation": "Index l√† c·∫•u tr√∫c d·ªØ li·ªáu gi√∫p DB t√¨m ki·∫øm nhanh h∆°n, nh∆∞ng t·ªën th√™m storage v√† ch·∫≠m h∆°n khi write"
    },
    {
      "id": 14,
      "type": "content",
      "title": "N+1 Query Problem",
      "emoji": "üíÄ",
      "points": [
        {
          "term": "N+1 l√† g√¨?",
          "description": "1 query l·∫•y danh s√°ch + N query l·∫•y data li√™n quan"
        },
        {
          "term": "V√≠ d·ª•",
          "description": "L·∫•y 20 orders ‚Üí 21 queries (1 + 20 cho items)"
        },
        {
          "term": "H·∫≠u qu·∫£",
          "description": "API ch·∫≠m, DB overload, user frustrated"
        }
      ],
      "code": "// ‚ùå N+1 Problem - 101 queries!\nconst users = await db.user.findMany() // 1 query\nfor (const user of users) {\n  user.posts = await db.post.findMany({ // 100 queries!\n    where: { userId: user.id }\n  })\n}",
      "highlight": "Pattern n√†y c√≥ th·ªÉ l√†m s·∫≠p server ch·ªâ v·ªõi 100 users!"
    },
    {
      "id": 15,
      "type": "visual",
      "title": "N+1 vs Optimized",
      "emoji": "üîß",
      "visualType": "comparison",
      "left": {
        "title": "N+1 (T·ªá)",
        "code": "Query 1: SELECT * FROM users\nQuery 2: SELECT * FROM posts WHERE user_id=1\nQuery 3: SELECT * FROM posts WHERE user_id=2\n...\nQuery 101: SELECT * FROM posts WHERE user_id=100",
        "count": "101 queries üî¥"
      },
      "right": {
        "title": "Optimized (T·ªët)",
        "code": "Query 1: SELECT * FROM users\nQuery 2: SELECT * FROM posts\n  WHERE user_id IN (1,2,3...100)",
        "count": "2 queries üü¢"
      }
    },
    {
      "id": 16,
      "type": "quiz",
      "quizId": "q5",
      "title": "üéØ Quiz: N+1",
      "question": "N+1 query x·∫£y ra khi n√†o?",
      "options": [
        "Query trong v√≤ng l·∫∑p",
        "Thi·∫øu index",
        "B·∫£ng qu√° l·ªõn"
      ],
      "correctOption": 0,
      "timeLimit": 15,
      "explanation": "N+1 x·∫£y ra khi query trong loop. Fix b·∫±ng eager loading, JOIN, ho·∫∑c IN clause"
    },
    {
      "id": 17,
      "type": "content",
      "title": "Transaction",
      "emoji": "üîí",
      "points": [
        {
          "term": "ƒê·ªãnh nghƒ©a",
          "description": "Nh√≥m operations ph·∫£i th√†nh c√¥ng c√πng nhau ho·∫∑c fail c√πng nhau"
        },
        {
          "term": "ACID",
          "description": "Atomic, Consistent, Isolated, Durable"
        },
        {
          "term": "Use case",
          "description": "Chuy·ªÉn ti·ªÅn, ƒë·∫∑t h√†ng, thanh to√°n"
        }
      ],
      "code": "// ‚úÖ Transaction: c·∫£ 2 th√†nh c√¥ng ho·∫∑c c·∫£ 2 fail\nawait db.$transaction([\n  db.account.update({ // Tr·ª´ 100k\n    where: { id: 'A' },\n    data: { balance: { decrement: 100000 }}\n  }),\n  db.account.update({ // C·ªông 100k\n    where: { id: 'B' },\n    data: { balance: { increment: 100000 }}\n  })\n])"
    },
    {
      "id": 18,
      "type": "quiz",
      "quizId": "q6",
      "title": "üéØ Quiz: Transaction",
      "question": "Transaction ƒë·∫£m b·∫£o ƒëi·ªÅu g√¨?",
      "options": [
        "Atomicity - t·∫•t c·∫£ th√†nh c√¥ng ho·∫∑c t·∫•t c·∫£ rollback",
        "Indexing - tƒÉng t·ªëc query",
        "Caching - l∆∞u t·∫°m data"
      ],
      "correctOption": 0,
      "timeLimit": 15,
      "explanation": "Transaction ƒë·∫£m b·∫£o data consistency - kh√¥ng c√≥ tr·∫°ng th√°i trung gian"
    },
    {
      "id": 19,
      "type": "content",
      "title": "Anti-patterns c·∫ßn tr√°nh",
      "emoji": "üö´",
      "points": [
        {
          "term": "SELECT *",
          "description": "L·∫•y d∆∞ data, ch·∫≠m v√† t·ªën bandwidth"
        },
        {
          "term": "LIKE '%abc%'",
          "description": "Kh√¥ng d√πng ƒë∆∞·ª£c index, scan to√†n b·∫£ng"
        },
        {
          "term": "Kh√¥ng pagination",
          "description": "SELECT * tr√™n 1M rows = üí•"
        },
        {
          "term": "L∆∞u JSON blob",
          "description": "Kh√¥ng query, index, validate ƒë∆∞·ª£c"
        },
        {
          "term": "Soft delete everywhere",
          "description": "M·ªçi query ƒë·ªÅu c·∫ßn WHERE deleted_at IS NULL"
        }
      ]
    },
    {
      "id": 20,
      "type": "quiz",
      "quizId": "q7",
      "title": "üéØ Quiz: Anti-pattern",
      "question": "LIKE '%abc%' g√¢y v·∫•n ƒë·ªÅ g√¨?",
      "options": [
        "Kh√¥ng d√πng ƒë∆∞·ª£c index, query c·ª±c ch·∫≠m",
        "Sai d·ªØ li·ªáu tr·∫£ v·ªÅ",
        "L·ªói c√∫ ph√°p SQL"
      ],
      "correctOption": 0,
      "timeLimit": 15,
      "explanation": "Wildcard ·ªü ƒë·∫ßu (%) khi·∫øn DB kh√¥ng th·ªÉ d√πng index, ph·∫£i scan to√†n b·ªô b·∫£ng"
    },
    {
      "id": 21,
      "type": "summary",
      "title": "T·ªïng k·∫øt",
      "emoji": "üìù",
      "points": [
        "üéØ Hi·ªÉu access patterns tr∆∞·ªõc khi thi·∫øt k·∫ø",
        "‚öñÔ∏è Normalize vs Denormalize d·ª±a tr√™n read/write ratio",
        "üõ°Ô∏è D√πng constraints ƒë·ªÉ b·∫£o v·ªá data integrity",
        "üìö Index c√°c columns hay filter v√† sort",
        "üíÄ Tr√°nh N+1 - d√πng eager loading",
        "üîí D√πng transaction cho multi-step operations",
        "üö´ Tr√°nh SELECT *, LIKE '%...%', no pagination"
      ]
    },
    {
      "id": 22,
      "type": "leaderboard",
      "title": "üèÜ Final Leaderboard",
      "emoji": "üèÜ",
      "description": "Ch√∫c m·ª´ng nh·ªØng Database Champions!"
    }
  ],
  "quizzes": [
    {
      "slideId": 2,
      "question": "Tr∆∞·ªùng h·ª£p n√†o g√¢y ra nhi·ªÅu database queries nh·∫•t?",
      "options": [
        "Fetch 100 users trong 1 query",
        "Fetch 1 user k√®m 5 posts c·ªßa h·ªç",
        "Fetch 100 users, r·ªìi fetch posts c·ªßa t·ª´ng user ri√™ng",
        "Fetch t·∫•t c·∫£ posts s·∫Øp x·∫øp theo ng√†y"
      ],
      "correctOption": 2,
      "timeLimit": 20
    },
    {
      "slideId": 6,
      "question": "Khi n√†o n√™n denormalize d·ªØ li·ªáu?",
      "options": [
        "Khi data thay ƒë·ªïi th∆∞·ªùng xuy√™n",
        "Khi c·∫ßn real-time consistency",
        "Khi t·ªëc ƒë·ªô ƒë·ªçc quan tr·ªçng v√† data √≠t thay ƒë·ªïi",
        "Khi mu·ªën ti·∫øt ki·ªám storage"
      ],
      "correctOption": 2,
      "timeLimit": 15
    },
    {
      "slideId": 10,
      "question": "Foreign Key d√πng ƒë·ªÉ l√†m g√¨?",
      "options": [
        "Li√™n k·∫øt d·ªØ li·ªáu gi·ªØa c√°c b·∫£ng",
        "TƒÉng t·ªëc query",
        "T·ª± ƒë·ªông t·∫°o index"
      ],
      "correctOption": 0,
      "timeLimit": 15
    },
    {
      "slideId": 13,
      "question": "Index gi√∫p g√¨ cho database?",
      "options": [
        "TƒÉng t·ªëc t√¨m ki·∫øm v√† query",
        "Gi·∫£m dung l∆∞·ª£ng database",
        "T·ª± ƒë·ªông s·ª≠a l·ªói data"
      ],
      "correctOption": 0,
      "timeLimit": 15
    },
    {
      "slideId": 16,
      "question": "N+1 query x·∫£y ra khi n√†o?",
      "options": [
        "Query trong v√≤ng l·∫∑p",
        "Thi·∫øu index",
        "B·∫£ng qu√° l·ªõn"
      ],
      "correctOption": 0,
      "timeLimit": 15
    },
    {
      "slideId": 18,
      "question": "Transaction ƒë·∫£m b·∫£o ƒëi·ªÅu g√¨?",
      "options": [
        "Atomicity - t·∫•t c·∫£ th√†nh c√¥ng ho·∫∑c t·∫•t c·∫£ rollback",
        "Indexing - tƒÉng t·ªëc query",
        "Caching - l∆∞u t·∫°m data"
      ],
      "correctOption": 0,
      "timeLimit": 15
    },
    {
      "slideId": 20,
      "question": "LIKE '%abc%' g√¢y v·∫•n ƒë·ªÅ g√¨?",
      "options": [
        "Kh√¥ng d√πng ƒë∆∞·ª£c index, query c·ª±c ch·∫≠m",
        "Sai d·ªØ li·ªáu tr·∫£ v·ªÅ",
        "L·ªói c√∫ ph√°p SQL"
      ],
      "correctOption": 0,
      "timeLimit": 15
    }
  ]
}
